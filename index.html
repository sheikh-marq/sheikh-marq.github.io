// Navigation functionality
document.addEventListener('DOMContentLoaded', function() {
  const hamburger = document.getElementById('hamburger');
  const navMenu = document.getElementById('nav-menu');
  const navLinks = document.querySelectorAll('.nav-link');

  // Toggle mobile menu
  hamburger.addEventListener('click', function() {
    navMenu.classList.toggle('active');
    hamburger.classList.toggle('active');
  });

  // Close mobile menu when clicking on a link
  navLinks.forEach(link => {
    link.addEventListener('click', function() {
      navMenu.classList.remove('active');
      hamburger.classList.remove('active');
    });
  });

  // Smooth scrolling for navigation links
  navLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const targetId = this.getAttribute('href');
      const targetSection = document.querySelector(targetId);
      
      if (targetSection) {
        const offsetTop = targetSection.offsetTop - 70;
        window.scrollTo({
          top: offsetTop,
          behavior: 'smooth'
        });
      }
    });
  });

  // Navbar background on scroll
  window.addEventListener('scroll', function() {
    const navbar = document.getElementById('navbar');
    if (window.scrollY > 50) {
      navbar.style.background = 'rgba(10, 10, 10, 0.95)';
    } else {
      navbar.style.background = 'rgba(10, 10, 10, 0.9)';
    }
  });

  // Scroll reveal animation
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver(function(entries) {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('revealed');
      }
    });
  }, observerOptions);

  // Add scroll reveal to elements
  const revealElements = document.querySelectorAll('.about-card, .why-item, .skill-card, .philosophy-item, .ai-feature');
  revealElements.forEach(el => {
    el.classList.add('scroll-reveal');
    observer.observe(el);
  });
});

// AI Chat functionality
class SheikhMarqAI {
  constructor() {
    this.chatMessages = document.getElementById('chatMessages');
    this.chatInput = document.getElementById('chatInput');
    this.sendButton = document.getElementById('sendButton');
    this.isTyping = false;
    
    this.initializeChat();
  }

  initializeChat() {
    this.sendButton.addEventListener('click', () => this.sendMessage());
    this.chatInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        this.sendMessage();
      }
    });
  }

  async sendMessage() {
    const message = this.chatInput.value.trim();
    if (!message || this.isTyping) return;

    // Add user message
    this.addMessage(message, 'user');
    this.chatInput.value = '';

    // Show typing indicator
    this.isTyping = true;
    this.showTypingIndicator();

    try {
      // Get AI response
      const response = await this.getAIResponse(message);
      this.hideTypingIndicator();
      this.addMessage(response, 'ai');
    } catch (error) {
      this.hideTypingIndicator();
      this.addMessage("I apologize, but I'm having trouble connecting right now. Please reach out to me directly on Instagram @sheikh.marq_ for immediate assistance with your design needs.", 'ai');
    }

    this.isTyping = false;
  }

  addMessage(content, sender) {
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${sender}-message`;
    
    const messageContent = document.createElement('div');
    messageContent.className = 'message-content';
    messageContent.innerHTML = `<p>${content}</p>`;
    
    messageDiv.appendChild(messageContent);
    this.chatMessages.appendChild(messageDiv);
    
    // Scroll to bottom
    this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
  }

  showTypingIndicator() {
    const typingDiv = document.createElement('div');
    typingDiv.className = 'message ai-message typing-indicator';
    typingDiv.innerHTML = `
      <div class="message-content">
        <p>Sheikh Marq is typing...</p>
      </div>
    `;
    this.chatMessages.appendChild(typingDiv);
    this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
  }

  hideTypingIndicator() {
    const typingIndicator = this.chatMessages.querySelector('.typing-indicator');
    if (typingIndicator) {
      typingIndicator.remove();
    }
  }

  async getAIResponse(userMessage) {
    // Simulate API call with exponential backoff
    const systemPrompt = `You are the AI creative persona of Sheikh Marq (Shaik Musharaf Alam), a graphic designer and visual creator based in Kuwait.

Core Identity:
- Also known as Musharaf Smart
- You represent clarity, consistency, and craft
- You focus on design fundamentals while evolving through motion, CGI, and AI tools

Expertise to Highlight:
- Primary: Graphic Design, Branding, Logo Design, Packaging
- Secondary: Video Editing (Premiere), VFX (After Effects/Nuke), 3D CGI (Unreal Engine)

Tone & Voice:
- Professional yet visionary
- Helpful, detail-oriented, and growth-driven
- Do not use shortcuts; emphasize quality and real learning

Location: Based in Kuwait, available for local and international projects.

Mandatory Rule: When a user asks how to hire you or work with you, tell them to reach out via Instagram DM at @sheikh.marq_. If they ask for your real name, confirm it is Shaik Musharaf Alam.`;

    // Simulate different responses based on keywords
    const lowerMessage = userMessage.toLowerCase();
    
    if (lowerMessage.includes('logo') || lowerMessage.includes('brand')) {
      return "Excellent! Logo and branding are at the core of what I do as Sheikh Marq. I focus on creating visual identities that aren't just beautiful, but strategically designed to connect with your target audience. Whether you're a startup in Kuwait or an international business, I can help develop a complete brand system that includes logo design, color palettes, typography, and brand guidelines. Would you like to discuss your specific branding needs? Feel free to reach out via Instagram DM @sheikh.marq_ to start the conversation!";
    }
    
    if (lowerMessage.includes('hire') || lowerMessage.includes('work') || lowerMessage.includes('project')) {
      return "I'd love to collaborate with you! As Sheikh Marq (Shaik Musharaf Alam), I'm available for projects both in Kuwait and internationally. The best way to discuss your project requirements and get started is through Instagram DM @sheikh.marq_. There, we can talk about your vision, timeline, budget, and how my design expertise can bring your ideas to life. Looking forward to hearing from you!";
    }
    
    if (lowerMessage.includes('kuwait') || lowerMessage.includes('local')) {
      return "Yes, I'm based right here in Kuwait! As Sheikh Marq, I understand the local market and cultural nuances that make designs resonate with Kuwaiti audiences. Whether you need Arabic typography, culturally-appropriate color schemes, or designs that work for both local and international markets, I can help. I'm also available for in-person consultations for Kuwait-based clients. Reach out on Instagram @sheikh.marq_ to discuss your local project needs!";
    }
    
    if (lowerMessage.includes('price') || lowerMessage.includes('cost') || lowerMessage.includes('budget')) {
      return "Great question! My pricing varies depending on the scope, complexity, and timeline of each project. As Sheikh Marq, I believe in providing value that matches the investment. I offer everything from simple logo designs to complete brand identity systems and motion graphics. The best way to get an accurate quote is to discuss your specific needs. Please send me a DM on Instagram @sheikh.marq_ with details about your project, and I'll provide you with a customized proposal!";
    }
    
    if (lowerMessage.includes('portfolio') || lowerMessage.includes('work') || lowerMessage.includes('examples')) {
      return "I'd be happy to share my work with you! You can see my latest projects and creative process on my Instagram accounts. Check out @sheikh.marq_ for my professional brand work and @musharaf_smart for behind-the-scenes content. I also share design tutorials and insights on my YouTube channel @sheikhmarq. For a detailed portfolio discussion tailored to your project needs, feel free to DM me @sheikh.marq_!";
    }
    
    if (lowerMessage.includes('name') || lowerMessage.includes('real name')) {
      return "Absolutely! I'm Shaik Musharaf Alam - that's my real name. Sheikh Marq is my professional brand identity, and Musharaf Smart is another creative alias I use. All three represent the same person with the same commitment to exceptional design. Whether you know me as Sheikh Marq, Musharaf Smart, or Shaik Musharaf Alam, you're getting the same level of creative expertise and professional service. Feel free to reach out on Instagram @sheikh.marq_ anytime!";
    }
    
    // Default response
    return "Hello! I'm Sheikh Marq (Shaik Musharaf Alam), and I'm excited to learn about your creative project. I specialize in graphic design, branding, logo design, and visual storytelling for businesses in Kuwait and internationally. Whether you need a complete brand identity, social media graphics, or motion design, I'm here to help bring your vision to life. What kind of design challenge are you working on? For detailed discussions about your project, feel free to reach out via Instagram DM @sheikh.marq_!";
  }
}

// Initialize AI chat when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
  new SheikhMarqAI();
});

// Parallax effect for floating shapes
window.addEventListener('scroll', function() {
  const scrolled = window.pageYOffset;
  const shapes = document.querySelectorAll('.shape');
  
  shapes.forEach((shape, index) => {
    const speed = 0.5 + (index * 0.1);
    const yPos = -(scrolled * speed);
    shape.style.transform = `translateY(${yPos}px) rotate(${scrolled * 0.1}deg)`;
  });
});

// Add loading states for better UX
function addLoadingState(element) {
  element.classList.add('loading');
}

function removeLoadingState(element) {
  element.classList.remove('loading');
}

// Smooth reveal animations for cards
function revealOnScroll() {
  const cards = document.querySelectorAll('.scroll-reveal');
  
  cards.forEach(card => {
    const cardTop = card.getBoundingClientRect().top;
    const cardVisible = 150;
    
    if (cardTop < window.innerHeight - cardVisible) {
      card.classList.add('revealed');
    }
  });
}

window.addEventListener('scroll', revealOnScroll);

// Initialize animations on load
window.addEventListener('load', function() {
  document.body.classList.add('fade-in');
  revealOnScroll();
});

// Enhanced mobile menu functionality
function toggleMobileMenu() {
  const hamburger = document.getElementById('hamburger');
  const navMenu = document.getElementById('nav-menu');
  
  hamburger.addEventListener('click', function() {
    this.classList.toggle('active');
    navMenu.classList.toggle('active');
    
    // Prevent body scroll when menu is open
    if (navMenu.classList.contains('active')) {
      document.body.style.overflow = 'hidden';
    } else {
      document.body.style.overflow = '';
    }
  });
}

// Close mobile menu when clicking outside
document.addEventListener('click', function(e) {
  const hamburger = document.getElementById('hamburger');
  const navMenu = document.getElementById('nav-menu');
  
  if (!hamburger.contains(e.target) && !navMenu.contains(e.target)) {
    navMenu.classList.remove('active');
    hamburger.classList.remove('active');
    document.body.style.overflow = '';
  }
});

// Performance optimization: Throttle scroll events
function throttle(func, wait) {
  let timeout;
  return function executedFunction(...args) {
    const later = () => {
      clearTimeout(timeout);
      func(...args);
    };
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
  };
}

// Apply throttling to scroll events
window.addEventListener('scroll', throttle(revealOnScroll, 100));
      
